@model backend.Models.Atividade
@using System.Text.Json;

@{
    ViewData["Title"] = Model.Titulo;
     ViewData["HideLogoutButton"] = true;
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link rel="stylesheet" href="~/css/site.css" />

<div class="atividade-container">
    <div class="atividade-header">
        <div class="progress-container">
            <div id="progress-text" class="progress-text">QuestÃ£o 1 de @Model.Questoes.Count()</div>
            <div class="progress">
                <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%;"></div>
            </div>
        </div>
     
    </div>

    <div id="atividade-body" class="text-center">
        <h2 id="pergunta-titulo" class="pergunta-titulo"></h2>
        <div id="alternativas-container" class="alternativas-container"></div>
    </div>
    
    <div id="feedback-footer" class="feedback-footer d-none">
        <div id="feedback-content">
            <h4 id="feedback-texto"></h4>
        </div>
        </div>

    <div id="final-screen" class="final-screen d-none text-center">
        <h1>ðŸŽ‰</h1>
        <h2 class="text-primary">ParabÃ©ns, vocÃª concluiu a atividade!</h2>
        <p>VocÃª acertou <strong id="acertos-finais">0</strong> de @Model.Questoes.Count() perguntas!</p>
        <div class="mt-4">
            <a href="@Url.Action("Index", "Crianca")" class="btn btn-secondary">Voltar ao InÃ­cio</a>
        </div>
    </div>
</div>

<div class="modal fade" id="confirmExitModal" tabindex="-1">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Tem certeza que quer sair?</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <p>Se vocÃª sair agora, seu progresso nesta atividade nÃ£o serÃ¡ salvo.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Continuar Jogando</button>
        <a href="@Url.Action("Index", "Crianca")" class="btn btn-danger">Sim, quero sair</a>
      </div>
    </div>
  </div>
</div>

@section Scripts {
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script>
        const atividadeData = @Html.Raw(JsonSerializer.Serialize(Model, new JsonSerializerOptions { PropertyNamingPolicy = JsonNamingPolicy.CamelCase, ReferenceHandler = System.Text.Json.Serialization.ReferenceHandler.IgnoreCycles }));
    </script>
    <script src="~/js/site.js"></script>
}
    